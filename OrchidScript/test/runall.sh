#!/bin/bash
#########################################################################################################
#########################################################################################################
#########################################################################################################
touch a.checksum.out
checksum_was=$(cat a.checksum.out)
checksum_now=$(md5sum ../*.cpp ../*.hpp | sort | md5sum | awk '{$1=$1;print}')
echo $checksum_was
echo $checksum_now
if [[ "$checksum_was" == "$checksum_now" ]]
then
    echo 'OrchidScript is up to date.'
else
    echo 'Recompiling OrchidScript...'
    echo $checksum_now > a.checksum.out
    g++ -g ../*.cpp -lffi
fi
#########################################################################################################
#########################################################################################################
#########################################################################################################
echo
test_scripts=`find | grep .mhd`
for test_script in $test_scripts
do
    echo '=============================================='
    echo 'About to run: ' $test_script
    time ./a.out $test_script
    echo '=============================================='
    echo
done
#########################################################################################################
#########################################################################################################
#########################################################################################################
